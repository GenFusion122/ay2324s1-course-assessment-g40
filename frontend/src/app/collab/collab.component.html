<div class="container-fluid h-100">
  <div class="row h-100">
    <!-- Left Half -->
    <div class="col-lg-5 h-100">
      <!-- Top Part of Left Half - Question View -->
      <div class="accordion shadow mt-3 mb-3 ml-3 mr-1" style="height: 90vh" id="accordionExample">
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button" type="button" [disabled]="isPanelOneOpen" (click)="handleAccordionPanelOneClick()" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
              {{ question.questionTitle }} 
                <!-- <a mat-icon-button style="width: 24px; height: 24px;" (click)="getQuestion()">
                  <mat-icon>refresh</mat-icon>
                </a>
                <a
                  class="leave-room" style="width: 24px; height: 24px;"
                  mat-icon-button (click)="leaveRoom()">
                  <mat-icon>exit_to_app</mat-icon>
                </a>
                <a mat-icon-button style="width: 24px; height: 24px;" (click)="toggleQuestionView()">
                  <mat-icon>find_in_page</mat-icon>
                </a> --->
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
            <div class="accordion-body overflow-y-scroll" style="height: 67vh">
              <p style="color: gray">Complexity: {{ question.questionComplexity }}</p>
              <p style="color: gray">Category: {{ question.questionCategory }}</p>
              <div class="p-1" [innerHTML]="question.questionDescription"></div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" [disabled]="isPanelTwoOpen" (click)="handleAccordionPanelTwoClick()" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
              Past Attempts 
            </button>
          </h2>
          <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
            <div class="accordion-body justify-content-center" style="height: 67vh">
              <button class="btn btn-primary btn-block mb-2 justify-content-center" style="width: 100%;" (click)="saveAttempt()">Save Attempt</button>
              <table class="table table-dark table-striped">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Language</th>
                    <th scope="col">Partner</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let attempt of attempts; index as index" (click)="viewAttempt(attempt)">
                    <th scope="row">{{ index + 1 }}</th>
                    <td>{{ attempt.language }}</td>
                    <td>{{ attempt.authors[0].user_id }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" [disabled]="isPanelThreeOpen" (click)="handleAccordionPanelThreeClick()" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThre">
              Room Chat
            </button>
          </h2>
          <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
            <div class="accordion-body p-0" style="height: 67vh">
              <app-chat></app-chat>
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-center align-items-center mb-3">
          <a mat-icon-button (click)="getQuestion()">
            <mat-icon>refresh</mat-icon>
          </a>
          <a
            class="leave-room"
            mat-icon-button (click)="leaveRoom()">
            <mat-icon>exit_to_app</mat-icon>
          </a>
          <a mat-icon-button (click)="toggleQuestionView()">
            <mat-icon>find_in_page</mat-icon>
          </a>
        </div>
      </div>

      <!-- Bottom Part of Left Half - Chat (Already Included in Existing Content) -->
      <!-- <div class="card shadow mt-1 mb-3 ml-3 mr-1" style="height: 33vh">
        <div class="card-header">
          <h5 class="card-title">Chat</h5>
        </div>
        <div class="card-body">
          <app-chat></app-chat>
          <div class="d-flex justify-content-center align-items-center mb-3">
            <a mat-icon-button (click)="getQuestion()">
              <mat-icon>refresh</mat-icon>
            </a>
            <a
              class="leave-room"
              mat-icon-button (click)="leaveRoom()">
              <mat-icon>exit_to_app</mat-icon>
            </a>
            <a mat-icon-button (click)="toggleQuestionView()">
              <mat-icon>find_in_page</mat-icon>
            </a>
          </div>
        </div>
      </div> -->
    </div>

    <!-- Right Half - Monaco Editor -->
    <div class="col-lg-7 h-100">
      <div class="card shadow mt-3 mb-3 ml-1 mr-3" style="height: 90vh">
        <div class="card-header">
          <h5 class="card-title">Monaco Editor</h5>
        </div>
        <div class="card-body">
          <!-- Existing Monaco Editor content... -->
          <ngx-monaco-editor style="height: 83vh" [options]="editorOptions" (onInit)="onInit($event)"></ngx-monaco-editor>
        </div>
      </div>
    </div>
  </div>
  <app-chat class="d-block position-fixed z-3" style="right: 0; bottom: 0" *ngIf="!solo;"></app-chat>
</div>
